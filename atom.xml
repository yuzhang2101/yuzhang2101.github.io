<?xml version="1.0" encoding="utf-8"?>


<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title type="text">鲨鱼糖果</title>
    <subtitle type="html">章鱼哥的个人博客。</subtitle>
    <updated>2025-10-28T11:57:03&#43;00:00</updated>
    <id>https://yuzhang17.github.io/</id>
    <link rel="alternate" type="text/html" href="https://yuzhang17.github.io/" />
    <link rel="self" type="application/atom&#43;xml" href="https://yuzhang17.github.io/atom.xml" />
    
    <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    <generator uri="https://gohugo.io/" version="0.151.0">Hugo</generator>
        <entry>
            <title type="text">
放下成见，你会收获更多“不期而遇的快乐”</title>
            <link rel="alternate" type="text/html" href="https://yuzhang17.github.io/posts/%E6%94%BE%E4%B8%8B%E6%88%90%E8%A7%81%E4%BD%A0%E4%BC%9A%E6%94%B6%E8%8E%B7%E6%9B%B4%E5%A4%9A%E4%B8%8D%E6%9C%9F%E8%80%8C%E9%81%87%E7%9A%84%E5%BF%AB%E4%B9%90/" />
            <id>https://yuzhang17.github.io/posts/%E6%94%BE%E4%B8%8B%E6%88%90%E8%A7%81%E4%BD%A0%E4%BC%9A%E6%94%B6%E8%8E%B7%E6%9B%B4%E5%A4%9A%E4%B8%8D%E6%9C%9F%E8%80%8C%E9%81%87%E7%9A%84%E5%BF%AB%E4%B9%90/</id>
            <updated>2025-10-28T11:57:02&#43;00:00</updated>
            <published>2025-10-28T12:59:03&#43;08:00</published>
            <author>
                    <uri>https://yuzhang17.github.io/</uri>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">
                &lt;p&gt;国庆的时候去了一趟兰州，和姐姐家的孩子玩了几个小时的 Switch，突然又感受到了任天堂游戏的快乐，尤其是和孩子一起玩的时候。再加上我家的“果子”也比较大了，想着她也可以和我一起玩了。于是回西安以后，我又把 Switch 重新买了回来。&lt;/p&gt;
                

            </summary>
            
                <content type="html">
                    
&lt;p&gt;国庆的时候去了一趟兰州，和姐姐家的孩子玩了几个小时的 Switch，突然又感受到了任天堂游戏的快乐，尤其是和孩子一起玩的时候。再加上我家的“果子”也比较大了，想着她也可以和我一起玩了。于是回西安以后，我又把 Switch 重新买了回来。&lt;/p&gt;
&lt;p&gt;距离上次卖掉 Switch 已经两年多了。上次之所以卖掉，主要是因为：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;游戏太贵了；&lt;/li&gt;
&lt;li&gt;Switch 上的游戏画风太“卡哇伊”了；&lt;/li&gt;
&lt;li&gt;那些“合家欢”游戏没人陪我一起玩，如果只让我自己玩，我宁愿去玩 Steam 上的游戏。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;然而，正是这次重新买回来，反而让我获得了意想不到的快乐。&lt;/p&gt;
&lt;p&gt;我之前一直觉得 Switch 上的游戏太“卡哇伊”，所以不适合我。但其实我根本没有真正尝试过。这次买回来，我在深夜孩子睡了以后，独自“藏”在书房，打开游戏，开始玩《超级马里奥 U》。那一刻，我突然找回了小时候玩“超级玛丽”的快乐。&lt;/p&gt;
&lt;p&gt;这让我猛然意识到，我那套“不喜欢可爱游戏”的固有成见，差点让我错失了这么多简单的快乐。&lt;/p&gt;
&lt;p&gt;这让我想到了，人不应该因为固有的成见，就不去尝试和体验新事物。我们应该保持开放的心态，并在尝试中多一点耐心，多给它点时间，多用心去感悟。这其实也是在给你自己更多获取快乐的可能性。&lt;/p&gt;
&lt;p&gt;哪怕是你第一反应很讨厌的东西，也不妨给它一次机会，去尝试一下，去体验一下，说不定它并没有你想象中的那么讨厌。&lt;/p&gt;
&lt;p&gt;食物就是一个最典型的例子。我们总是对很多地方的食物抱有刻板印象，导致我们不愿意去尝试。但当你多体验几次，慢慢减轻了对这种味道的不习惯后，你会体会到它的好，从而让你能尝试更多不同风格的食物，并获得更多不同的快乐。&lt;/p&gt;
&lt;p&gt;比如，我们（作为陕西人）小时候一直觉得本地人不喜欢吃甜食，会下意识地认为我们肯定也不喜欢吃粤菜。但当我真正开始尝试粤菜，吃过两三次习惯了之后，我也开始喜欢上粤菜，更能理解别人所说的，粤菜在“追求食材本味”方面的精妙之处。&lt;/p&gt;
&lt;p&gt;所以，多去尝试，多去体验，放下固有成见，你就能获得更多不期而遇的快乐。&lt;/p&gt;
                    

                </content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="https://yuzhang17.github.io/categories/%E7%94%9F%E6%B4%BB/" term="生活" label="生活" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://yuzhang17.github.io/tags/%E4%BA%BA%E7%94%9F%E6%84%9F%E6%82%9F/" term="人生感悟" label="人生感悟" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">
写给即将上初中的王梓</title>
            <link rel="alternate" type="text/html" href="https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/" />
            <id>https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/</id>
            <updated>2025-10-28T11:57:02&#43;00:00</updated>
            <published>2025-10-15T19:56:28&#43;08:00</published>
            <author>
                    <uri>https://yuzhang17.github.io/</uri>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">
                &lt;p&gt;&lt;strong&gt;Hello 王梓，&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;忽然从你小姨那里惊闻你要上初中，又闻河北高考 630 多分才能上西电，鉴于你对肉夹馍和冰峰的执着，又恰逢今天在医院打吊瓶而从忙碌的英语学习中能抽出来一些时间，小姨夫觉得有必要在这个你人生中第一个比较重要的节点里给你分享一些经验，避免你走一些弯路。&lt;/p&gt;
                

            </summary>
            
                <content type="html">
                    
&lt;p&gt;&lt;strong&gt;Hello 王梓，&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;忽然从你小姨那里惊闻你要上初中，又闻河北高考 630 多分才能上西电，鉴于你对肉夹馍和冰峰的执着，又恰逢今天在医院打吊瓶而从忙碌的英语学习中能抽出来一些时间，小姨夫觉得有必要在这个你人生中第一个比较重要的节点里给你分享一些经验，避免你走一些弯路。&lt;/p&gt;
&lt;p&gt;这些东西或许你能听懂，或许你听不懂，但我依然觉得我应该先告诉你，让你有一个清晰的目标和认知。&lt;/p&gt;
&lt;h2 id=&#34;一学习的动机&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#一学习的动机&#34; class=&#34;anchor-link&#34; aria-label=&#34;一学习的动机&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#contents:一学习的动机&#34; class=&#34;headings&#34;&gt;一、学习的动机&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;你为什么要学习&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#你为什么要学习&#34; class=&#34;anchor-link&#34; aria-label=&#34;你为什么要学习&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#contents:你为什么要学习&#34; class=&#34;headings&#34;&gt;你为什么要学习？&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;你可以问问你自己，有多少人认真思考过这个问题，王梓你有没有思考过这个问题？是因为父母让你学吗？还是为了赚很多钱？&lt;/p&gt;
&lt;p&gt;在看我给你的答案之前你可以先思考一下再继续，最好把你现在脑子里想到的写下来。每个人应该都有自己的答案，有的人是为了国家，比如周总理的“为中华之崛起而读书”，有的人只是为了摆脱贫穷，这些原因之间没有什么优劣之分，但是它对于个人来说是非常重要的，为什么呢？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;因为它给你提供了学习的动力，就像汽车的发动机之于汽车一样。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;一个人永远不可能在别人的逼迫下把一件事情做得特别成功，要想成功必须是自驱的。比如我给你举个例子，如果学习是你妈妈强迫你的，你有一万种方法可以逃避，你可以假装写作业，然后想自己的游戏怎么玩；你可以上课时假装在听，结果在想别的事情......没有人能每一秒都盯着你，就算盯着你，他也盯不住你脑子里在想什么。&lt;/p&gt;
&lt;h3 id=&#34;为什么是什么&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#为什么是什么&#34; class=&#34;anchor-link&#34; aria-label=&#34;为什么是什么&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#contents:为什么是什么&#34; class=&#34;headings&#34;&gt;“为什么”是什么&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;明白了为什么重要，我们再谈谈“为什么”可能是什么。对于小姨夫来说，其实就是我要好好学习，我要用比较少的时间赚到能够支撑我想干的事情的钱，然后用这些钱去干我想干的事情，比如买游戏机，买好吃的，带家里人出去旅游，看看外面的世界。就这样，其实没多伟大，其实也不需要太伟大，只要你想明白了，它对你学习的帮助很大。&lt;/p&gt;
&lt;h3 id=&#34;你自己永远是你自己事情的第一责任人&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#你自己永远是你自己事情的第一责任人&#34; class=&#34;anchor-link&#34; aria-label=&#34;你自己永远是你自己事情的第一责任人&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#contents:你自己永远是你自己事情的第一责任人&#34; class=&#34;headings&#34;&gt;你自己永远是你自己事情的第一责任人&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;还有一点小姨夫想给你说，&lt;strong&gt;你自己永远是你自己事情的第一责任人。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这个话可能不太好理解，我给你举个例子。比如学习，你永远不要想着让你爸爸妈妈推着你，逼着你学习，或者让他们来操心你怎么才能学得好，这不是他们的责任，这是你自己的责任。&lt;/p&gt;
&lt;p&gt;再比如，你遇到一个不会的题，你不要等着别人来给你教，或者要求你去学，你要主动出击，因为这是你自己的事情。你需要自己想办法搞懂它，找老师问，找同学问，去网上搜。就像你饿了的时候，你就会去找吃的，学习也是一样，你要为自己的事情负责。&lt;/p&gt;
&lt;p&gt;你需要自己不停地思考：“我如何才能学得更好？”
“今天要去补这个课，它对我的学习到底有没有帮助？还是我只是去完成一下任务，来补一下课，时间浪费了，但是其实没学到？”如果是这样的话，你还不如在家打会儿游戏，还能获得快乐。&lt;strong&gt;既然时间花了，就一定要保证自己是认真学了。&lt;/strong&gt; 只有这样，你才能最高效地学习。
那这样的好处是啥？你高效地学习了，你就能腾出来更多的时间来玩，只有这样，你才能既保住玩的时间，学习也不耽误。记住：&lt;strong&gt;学习就认真学习，玩就疯狂玩（Work hard, play harder）。&lt;/strong&gt; 不要假装，你可以欺骗别人但是你欺骗不了自己，欺骗别人是没有意义的。所以时常问问自己：“我是不是认真学习了？”做到每次问的时候，你自己都能很坚定地发自内心地说：“YES”。&lt;/p&gt;
&lt;h2 id=&#34;二学习的方法&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#二学习的方法&#34; class=&#34;anchor-link&#34; aria-label=&#34;二学习的方法&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#contents:二学习的方法&#34; class=&#34;headings&#34;&gt;二、学习的方法&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;现在明确了学习的动机，下一步我们聊聊到底如何学习。
我依然觉得&lt;strong&gt;自学是一个关键的能力&lt;/strong&gt;，就像我刚说的，只有自驱以后你才能最高效，做到最好。那么，如何自学？我把它分为四步：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;有明确的目标&lt;/strong&gt;
你可以想一个简单的目标，比如“考上西电”。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;能够制定明确的学习计划&lt;/strong&gt;
你要按照这个目标制定明确的计划。比如你去看看考上西电需要考到全省多少名，那么能推出来你需要考到哪个高中，再推回来，你现在在你的初中需要考到啥水平？那么怎么做才能考到现在在初中需要考的名次？然后根据这个制定学习计划。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;能够找到好的资源帮助你&lt;/strong&gt;
有了计划你需要找到资源辅助你学习。资源绝对不限于在学校的资源，还有可以在网上找到的，在书里的，反正一切有利于帮助你完成计划的都可以用。可以用的包括：学校好好上课，自己找参考书，自己网上搜网课，问同学等等等等。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;有毅力执行下去&lt;/strong&gt;
这个是最难的，如果你没有毅力坚持下去，所有都是空谈。但是我相信你只要想明白了为什么要学习，你一定能做到。当觉得自己没毅力的时候，你就想想你的动机。而且毅力是可以锻炼的，当你能做到坚持按你的计划学习时，之后所有的事情你都会坚持得很容易。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;总结一下这四步，你再想想，这四步是不是可以用在任何事情上？比如减肥，学一门新的技能。通过学习把这个能力锻炼好，你会在以后很多事情上都受益。&lt;/p&gt;
&lt;h2 id=&#34;三在初中你的重点是什么&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#三在初中你的重点是什么&#34; class=&#34;anchor-link&#34; aria-label=&#34;三在初中你的重点是什么&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#contents:三在初中你的重点是什么&#34; class=&#34;headings&#34;&gt;三、在初中，你的重点是什么？&lt;/a&gt;&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;保持身体健康&lt;/strong&gt;
多运动，保持身体健康。身体是革命的本钱，一定要坚持锻炼，只有有健康的身体，你才能有时间有精力做别的事情。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;转变学习模式&lt;/strong&gt;
从小学的需要别人督促的被动学习，到主动学习。自己主动定计划，研究自己需要学习的东西，找资料。从小学到初中，从被动到主动的改变，是你和别人拉开差距的关键。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;保持自信&lt;/strong&gt;
在初中大家都开始进入青春期，同学们关注的点会和小学时差别很大。但无论遇到什么事情，你都要保持自信。这世界上并没有什么大不了的事情和人，大部分的人和事对你来说都是无关紧要的，所以你要保持自信，不要被那些无关紧要的事情干扰。你要有&amp;quot;没有什么事情我做不成&amp;quot;的自信。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;和父母保持沟通&lt;/strong&gt;
在学校碰到任何事情，家庭永远是你最坚强的后盾。如果在学校遇到任何处理不了的事情，都要及时和你的父母沟通，千万不要忍着想着自己解决。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;多读书，读好书，培养阅读的兴趣&lt;/strong&gt;
一定要多读书，最好有一个自己的阅读列表、阅读计划。读书是每个人增长见识最快的方法，你的人生只有一次，通过读书，你可以体验不同的人生，有不同的人生感悟，可以学习别人应对生活中各种问题的方法。读书也是你最快速学习到各方面知识的方法，它可以让你拥有应对各种事情的能力。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;学英语&lt;/strong&gt;
英语的重要性不在于高考，而在于它会给你人生更多的选择机会。你可以按照《把你的英语用起来》去学。现在开始，自己订立一个计划，开始学习起来。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;最后&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#最后&#34; class=&#34;anchor-link&#34; aria-label=&#34;最后&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%86%99%E7%BB%99%E5%8D%B3%E5%B0%86%E4%B8%8A%E5%88%9D%E4%B8%AD%E7%9A%84%E7%8E%8B%E6%A2%93/#contents:最后&#34; class=&#34;headings&#34;&gt;最后&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;好好学习依然是目前一个普通人想要完成层级跃迁最简单的方法，所以一定要把学习先搞定。&lt;/p&gt;
&lt;p&gt;其次，学习并不是唯一重要的事情，在你把学习搞定的前提下，坚持阅读，坚持运动。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;你未来的路需要你自己走出来，也只能靠你自己走出来。加油，你一定可以的！！！&lt;/strong&gt;&lt;/p&gt;

                    

                </content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="https://yuzhang17.github.io/categories/%E7%94%9F%E6%B4%BB/" term="生活" label="生活" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://yuzhang17.github.io/tags/%E6%95%99%E8%82%B2/" term="教育" label="教育" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">
国庆游兰州美食简明总结</title>
            <link rel="alternate" type="text/html" href="https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/" />
            <id>https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/</id>
            <updated>2025-10-28T11:57:02&#43;00:00</updated>
            <published>2025-10-13T00:07:52&#43;08:00</published>
            <author>
                    <uri>https://yuzhang17.github.io/</uri>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">
                &lt;p&gt;国庆用了五天时间去兰州大吃了一场，这次的目的是美食。本着疯吃，狂吃的目的，这趟旅程吃了牛肉面，手抓羊肉，烤肉，包子，炒肉片，辣子烤肉，羊羔肉等等，吃的东西整体没有踩坑，基本达到了出行前的预期。总结一下美食攻略以备有人之后能用到。&lt;/p&gt;
                

            </summary>
            
                <content type="html">
                    
&lt;p&gt;国庆用了五天时间去兰州大吃了一场，这次的目的是美食。本着疯吃，狂吃的目的，这趟旅程吃了牛肉面，手抓羊肉，烤肉，包子，炒肉片，辣子烤肉，羊羔肉等等，吃的东西整体没有踩坑，基本达到了出行前的预期。总结一下美食攻略以备有人之后能用到。&lt;/p&gt;
&lt;h2 id=&#34;总结&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#总结&#34; class=&#34;anchor-link&#34; aria-label=&#34;总结&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:总结&#34; class=&#34;headings&#34;&gt;总结&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;路线&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#路线&#34; class=&#34;anchor-link&#34; aria-label=&#34;路线&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:路线&#34; class=&#34;headings&#34;&gt;路线&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;从西安出发途经榆中到兰州。返程从兰州出发途经固原返回西安。&lt;/p&gt;
&lt;h3 id=&#34;个人主观排名&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#个人主观排名&#34; class=&#34;anchor-link&#34; aria-label=&#34;个人主观排名&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:个人主观排名&#34; class=&#34;headings&#34;&gt;个人主观排名&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;固原&lt;/strong&gt;：马有川机场羊羔肉总店&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兰州&lt;/strong&gt;：春台手抓总店&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兰州&lt;/strong&gt;：白老七蓬灰牛肉面总店&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兰州&lt;/strong&gt;：阿西娅&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;固原&lt;/strong&gt;：大湾小炒馆&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兰州&lt;/strong&gt;：南关夜市：牛奶鸡蛋醪糟&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兰州&lt;/strong&gt;：南关夜市：海龙炒面（非酸辣味烤蹄筋）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兰州&lt;/strong&gt;：南关夜市：羊杂（干拌）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兰州&lt;/strong&gt;：南关夜市：海龙炒面（其它烤肉，炒面）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兰州&lt;/strong&gt;：南关夜市：凉面&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兰州&lt;/strong&gt;：南关夜市：咸奶茶&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;兰州&lt;/strong&gt;：路边随便找了一家辣子烤肉&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;兰州部分详情&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#兰州部分详情&#34; class=&#34;anchor-link&#34; aria-label=&#34;兰州部分详情&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:兰州部分详情&#34; class=&#34;headings&#34;&gt;兰州部分详情&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;我们二号到达兰州，五号离开兰州。在兰州期间吃了牛肉面，手抓羊肉，烤肉，包子，炒肉片，辣子烤肉。逛了两个夜市。&lt;/p&gt;
&lt;h3 id=&#34;牛肉面推荐&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#牛肉面推荐&#34; class=&#34;anchor-link&#34; aria-label=&#34;牛肉面推荐&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:牛肉面推荐&#34; class=&#34;headings&#34;&gt;牛肉面推荐&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;白老七蓬灰牛肉面总店&lt;/strong&gt;
位置：城关区金城路。
我们只吃了这一家，白老七蓬灰牛肉面总店。位置比较偏僻，但是味道可以，因为位置偏僻所以排队人少，门口路边也可以停车。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;磨沟沿老字号牛肉面总店&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;马安军辣子牛肉面&lt;/strong&gt;
这两家是出租车司机推荐的店，都需要排很长时间的队，由于排队时间太长我们没有去吃，如果不介意排队的话可以去试试，应该不会踩坑。磨沟沿老字号牛肉面总店不好停车。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;手抓羊肉&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#手抓羊肉&#34; class=&#34;anchor-link&#34; aria-label=&#34;手抓羊肉&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:手抓羊肉&#34; class=&#34;headings&#34;&gt;手抓羊肉&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;春台手抓总店&lt;/strong&gt;
春台手抓环境很好，地方非常大，接待能力很强，服务也比较好，如果人比较多是个很好的选项。
手抓羊肉非常香，羊肉一端上桌就能闻到浓浓的香味，特别推荐&lt;strong&gt;羊脖子&lt;/strong&gt;。
需要注意的是春台手抓有很多假的店，一定要认准店铺。他们家是一个路边很大的店，在路边有三层楼。
附近不好停车。
在春台手抓附近也有很多便宜的手抓羊肉店，如果追求性价比可以去附近试试，我们不清楚贵的和便宜的区别所以没有尝试。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;包子&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#包子&#34; class=&#34;anchor-link&#34; aria-label=&#34;包子&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:包子&#34; class=&#34;headings&#34;&gt;包子&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;胡家包子&lt;/strong&gt;
胡家包子是一家连锁店，我们去的小西湖附近的那一家，包子都是现包的，明厨亮灶你可以看到工作人员包包子。整体味道不错，馅料很香，但是不是特别惊艳。如果正好在周围早餐想吃包子的话可以试试。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;夜市&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#夜市&#34; class=&#34;anchor-link&#34; aria-label=&#34;夜市&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:夜市&#34; class=&#34;headings&#34;&gt;夜市&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;夜市去了 &lt;strong&gt;正宁路夜市&lt;/strong&gt; 和 &lt;strong&gt;南关夜市&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;正宁路夜市&lt;/strong&gt; 人太多了，东西质量很一般，完全沦为网红街，和我 17 年去已经完全不一样了。不推荐，可以直接不去。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;南关夜市&lt;/strong&gt; 的羊杂，牛奶鸡蛋醪糟，凉面，奶茶，烤肉都还可以。
烤肉我们没有吃中段的那几家看起来很网红的店。吃了&lt;strong&gt;海龙炒面&lt;/strong&gt;的烤肉和炒面。最好吃的是烤蹄筋，菜单上是酸辣的烤法。你可以让老板不要给你烤酸辣的，按照烤肉的烤法正常放盐和孜然，个人觉得这种烤法最好吃。海龙炒面最有名的是炒面，但我个人觉得味道不是很惊艳。如果要喝酒需要坐到对面一个专门可以喝酒的区域。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;其它&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#其它&#34; class=&#34;anchor-link&#34; aria-label=&#34;其它&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:其它&#34; class=&#34;headings&#34;&gt;其它&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;阿西娅&lt;/strong&gt;
是一个环境很好啥都有的餐厅，唯一一家我 17 年和这次去都觉得很好的店。店内环境很好，菜品很齐全，可以根据自己的喜好想吃什么点什么。如果想买一些兰州的饼和糕点也可以买了带走，我们买了一些整体都很好吃。是综合水平很高的一家店。所有都很好，唯一的就是价格不便宜。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;固原部分&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#固原部分&#34; class=&#34;anchor-link&#34; aria-label=&#34;固原部分&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:固原部分&#34; class=&#34;headings&#34;&gt;固原部分&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;强行路过固原主要是去吃 13 年左右曾经路过偶然吃到的羊羔肉，全家人惦记了好多年了， 最后确实没让人失望。除此之外还在住的地方随便找了一家炒肉片，没想到相当的好吃。&lt;/p&gt;
&lt;h3 id=&#34;羊羔肉&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#羊羔肉&#34; class=&#34;anchor-link&#34; aria-label=&#34;羊羔肉&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:羊羔肉&#34; class=&#34;headings&#34;&gt;羊羔肉&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;固原马有川机场羊羔肉总店&lt;/strong&gt;
这家店离高速路口不远，如果路过固原强烈推荐。羊羔肉是按件卖的，一件大概两斤左右，本地人都是一人一件。但是我们去吃按照两个人一件要的。然后再配几个饼子和八宝茶，是本趟旅程最好吃的店。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;炒肉片&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#炒肉片&#34; class=&#34;anchor-link&#34; aria-label=&#34;炒肉片&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9B%BD%E5%BA%86%E6%B8%B8%E5%85%B0%E5%B7%9E%E7%BE%8E%E9%A3%9F%E6%80%BB%E7%BB%93/#contents:炒肉片&#34; class=&#34;headings&#34;&gt;炒肉片&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;大湾小炒馆&lt;/strong&gt;
这家是我们随便在住的地方随便找的街边店，进去就发现老板在切牛肉，看着牛肉特别新鲜而且质量很好。我们五个大人要了两斤牛肉三个面片，吃得非常饱。&lt;/li&gt;
&lt;/ul&gt;
                    

                </content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="https://yuzhang17.github.io/categories/%E7%94%9F%E6%B4%BB/" term="生活" label="生活" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://yuzhang17.github.io/tags/%E7%BE%8E%E9%A3%9F/" term="美食" label="美食" />
                            
                        
                            
                            
                            
                                <category scheme="https://yuzhang17.github.io/tags/%E6%97%85%E8%A1%8C/" term="旅行" label="旅行" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">
一步一步落地持续部署</title>
            <link rel="alternate" type="text/html" href="https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/" />
            <id>https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/</id>
            <updated>2025-10-28T11:57:02&#43;00:00</updated>
            <published>2022-06-21T16:04:20&#43;08:00</published>
            <author>
                    <uri>https://yuzhang17.github.io/</uri>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">
                &lt;p&gt;根据CD Fundation2022年第二季度的报告，有47%的开发人员使用了CI/CD，但是只有1/5的开发人员使用持续部署（Continuous Deployment）的方式完全自动化的进行构建、测试、部署代码到生产环境。在过去的一年时间里，我们团队尝试从持续交付（Continuous  Delievery）向持续部署(Continuous Deployment)转变，并在此过程中总结了一些经验。&lt;/p&gt;
                

            </summary>
            
                <content type="html">
                    
&lt;p&gt;根据CD Fundation2022年第二季度的报告，有47%的开发人员使用了CI/CD，但是只有1/5的开发人员使用持续部署（Continuous Deployment）的方式完全自动化的进行构建、测试、部署代码到生产环境。在过去的一年时间里，我们团队尝试从持续交付（Continuous  Delievery）向持续部署(Continuous Deployment)转变，并在此过程中总结了一些经验。&lt;/p&gt;
&lt;h2 id=&#34;让团队接受持续部署&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#让团队接受持续部署&#34; class=&#34;anchor-link&#34; aria-label=&#34;让团队接受持续部署&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:让团队接受持续部署&#34; class=&#34;headings&#34;&gt;让团队接受持续部署&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;一般情况下，在团队推广持续部署时团队成员第一反应都是不接受。主要是因为：一方面团队成员已经习惯了在提交代码之后由QA去验证然后手动去部署的方式；另一方面团队对于在代码被提交之后直接部署到生产环境缺乏信心。为了让团队成员接受持续部署，我们可以参照以下步骤：&lt;/p&gt;
&lt;h3 id=&#34;明确持续部署的价值&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#明确持续部署的价值&#34; class=&#34;anchor-link&#34; aria-label=&#34;明确持续部署的价值&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:明确持续部署的价值&#34; class=&#34;headings&#34;&gt;明确持续部署的价值&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;首先，我们需要在团队内对于持续部署的价值达成一致。可以在团队内安排相关主题的session，在团队内分享持续部署所能带给团队的价值以及业界内持续部署的发展情况。这样可以让大家迅速明白当前团队DEVOPS在业界的级别，让大家更清楚正确的方向。在这里推荐 &lt;a href=&#34;https://cd.foundation/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CD fundation&lt;/a&gt;，你可以从中找到最新的业界DEVOPS报告。&lt;/p&gt;
&lt;h3 id=&#34;头脑风暴持续部署验收条件&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#头脑风暴持续部署验收条件&#34; class=&#34;anchor-link&#34; aria-label=&#34;头脑风暴持续部署验收条件&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:头脑风暴持续部署验收条件&#34; class=&#34;headings&#34;&gt;头脑风暴持续部署验收条件&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;其次，我们需要和整个团队一起定义应用持续部署的验收条件。通过组织一个workshop，让大家列出对于持续部署的疑虑以及我们需要在哪些维度做到什么程度团队就可以使用持续部署。通过workshop上收集到的信息总结成持续部署验收条件，团队能够明确知道当达到什么程度时就可以开始落地持续部署。&lt;/p&gt;
&lt;h3 id=&#34;识别差距指定计划&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#识别差距指定计划&#34; class=&#34;anchor-link&#34; aria-label=&#34;识别差距指定计划&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:识别差距指定计划&#34; class=&#34;headings&#34;&gt;识别差距，指定计划&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;最后，根据验收条件和团队当前的状态，可以明确两者之间的差距。通过差距明确任务列表，之后可以在每个迭代中排入相关的卡，当做完所有任务列表中的卡时，就可以真正开始在团队中应用持续部署。&lt;/p&gt;
&lt;h2 id=&#34;在持续部署过程中保证质量&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#在持续部署过程中保证质量&#34; class=&#34;anchor-link&#34; aria-label=&#34;在持续部署过程中保证质量&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:在持续部署过程中保证质量&#34; class=&#34;headings&#34;&gt;在持续部署过程中保证质量&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;在使用持续部署之后，团队会更频繁的自动化部署代码到生产环境。因此，也需要一些响应的机制保证部署的质量。&lt;/p&gt;
&lt;h3 id=&#34;工作流程&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#工作流程&#34; class=&#34;anchor-link&#34; aria-label=&#34;工作流程&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:工作流程&#34; class=&#34;headings&#34;&gt;工作流程&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;在使用持续部署前后工作流程是不相同的，在使用持续部署之前，QA会在代码merge之前进行测试，并在测试完成之后将代码手动部署到生产环境，如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/yuzhang17/static-resources@master/blogs/cd-pratice/as-is-flow.32urg2atv4m0.webp&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;而在持续部署之后：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/yuzhang17/static-resources@master/blogs/cd-pratice/to-be-flow.b655ppg7fgw.webp&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;我们需要进行测试左移。因为QA已经没有机会在代码合并之后进行测试。测试左移有两个方面：一方面QA在代码开发之前介入，和开发人员一起梳理测试用例；另一方面，开发人员需要先完成自动化测试才能合入实现代码，以保证所有实现代码在部署到生产环境之前都有足够的自动化测试覆盖。&lt;/li&gt;
&lt;li&gt;我们需要调整desk check 的时机，团队成员需要在代码合入之前一起检查实现的功能是否符合预期，是否有足够的自动化测试覆盖。可以选择在特性分支上进行desk check。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;测试&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#测试&#34; class=&#34;anchor-link&#34; aria-label=&#34;测试&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:测试&#34; class=&#34;headings&#34;&gt;测试&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;为了保证部署到生产环境的质量，测试是最重要的一部分。&lt;/p&gt;
&lt;h4 id=&#34;测试策略&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#测试策略&#34; class=&#34;anchor-link&#34; aria-label=&#34;测试策略&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:测试策略&#34; class=&#34;headings&#34;&gt;测试策略&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;在团队中需要有明确的测试策略，在我们团队中，我们使用测试金字塔和测试四象限来描述我们的测试策略。&lt;/p&gt;
&lt;h4 id=&#34;测试金字塔&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#测试金字塔&#34; class=&#34;anchor-link&#34; aria-label=&#34;测试金字塔&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:测试金字塔&#34; class=&#34;headings&#34;&gt;测试金字塔&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/yuzhang17/static-resources@master/blogs/cd-pratice/%E6%B5%8B%E8%AF%95%E9%87%91%E5%AD%97%E5%A1%94.95yw26z2cq0.webp&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;测试四象限&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#测试四象限&#34; class=&#34;anchor-link&#34; aria-label=&#34;测试四象限&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:测试四象限&#34; class=&#34;headings&#34;&gt;测试四象限&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/yuzhang17/static-resources@master/blogs/cd-pratice/%E6%B5%8B%E8%AF%95%E5%9B%9B%E8%B1%A1%E9%99%90.23wsb0jzb8cg.webp&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;通过测试策略：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;团队成员能够明确的知道已有代码的测试覆盖率，帮助团队构建信心。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;团队成员可以明确的知道在实现新功能时需要添加哪些层次的自动化测试来保证质量。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;足够的测试覆盖&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#足够的测试覆盖&#34; class=&#34;anchor-link&#34; aria-label=&#34;足够的测试覆盖&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:足够的测试覆盖&#34; class=&#34;headings&#34;&gt;足够的测试覆盖&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;在有了明确的测试策略之后，我们还需要足够的测试覆盖率。这里的覆盖率不是简单的基于代码的行覆盖率或者是分支覆盖率，而应该是测试用例的覆盖率。我们也可以使用测试金字塔去描述。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/yuzhang17/static-resources@master/blogs/cd-pratice/%E6%B5%8B%E8%AF%95%E8%A6%86%E7%9B%96%E7%8E%87.6sz8ncb5gu80.webp&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;回滚策略&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#回滚策略&#34; class=&#34;anchor-link&#34; aria-label=&#34;回滚策略&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E8%90%BD%E5%9C%B0%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/#contents:回滚策略&#34; class=&#34;headings&#34;&gt;回滚策略&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;最后，团队还要有合理的回滚策略，以便在bug泄露到生产环境时能够快速回滚。我们团队在实践中使用了蓝绿部署的方式，当发现新的部署有问题时，可以快速的切换回前一个版本。&lt;/p&gt;

                    

                </content>
            
            
            
            
            
                
                    
                
                    
                
            
        </entry>
    
        <entry>
            <title type="text">
在Kubernetes中实现优雅退出</title>
            <link rel="alternate" type="text/html" href="https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/" />
            <id>https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/</id>
            <updated>2025-10-28T11:57:02&#43;00:00</updated>
            <published>2021-09-10T11:24:56&#43;08:00</published>
            <author>
                    <uri>https://yuzhang17.github.io/</uri>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">
                &lt;p&gt;随着持续部署（Continously Deployment）在项目中的使用，之前定期或者固定时间的发布节奏变为了随时高频率的发布。这就要求每次发布都应该是零停机部署（Zero Downtime Deployment），否则将会引入bug。k8s中有一套完整的机制保证我们的应用能够实现零停机部署，本文将重点分析其中的优雅退出部分。&lt;/p&gt;
                

            </summary>
            
                <content type="html">
                    
&lt;p&gt;随着持续部署（Continously Deployment）在项目中的使用，之前定期或者固定时间的发布节奏变为了随时高频率的发布。这就要求每次发布都应该是零停机部署（Zero Downtime Deployment），否则将会引入bug。k8s中有一套完整的机制保证我们的应用能够实现零停机部署，本文将重点分析其中的优雅退出部分。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;本文需要对k8s的架构和核心组件的职责有一定的了解，如不了解可参考 &lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/components/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes Components&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;发现问题&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#发现问题&#34; class=&#34;anchor-link&#34; aria-label=&#34;发现问题&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#contents:发现问题&#34; class=&#34;headings&#34;&gt;发现问题&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;对于Kubernetes Deployment的每次部署过程，都是新版本的Pod创建、老版本的Pod删除的过程。&lt;/p&gt;
&lt;img src=&#34;https://cdn.jsdelivr.net/gh/yuzhang17/static-resources@master/blogs/graceful_shutdown_in_kubernetes/graceful_shutdown_delete_deployment.7b6bk11smog0.jpg&#34; alt=&#34;graceful_shutdown_delete_deployment&#34; style=&#34;zoom:25%;&#34; /&gt;
&lt;p&gt;在这个过程中如果不使用优雅退出，则会引发两个问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;问题1：可能会出现Pod未将正在处理的请求处理完成的情况下被删除，如果该请求不是幂等性的，则会导致状态不一致的bug。&lt;/li&gt;
&lt;li&gt;问题2：可能会出现Pod已经被删除，Kubernetes仍然将流量导向该Pod，从而出现用户请求处理失败，带来比较差的用户体验。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;分析问题&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#分析问题&#34; class=&#34;anchor-link&#34; aria-label=&#34;分析问题&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#contents:分析问题&#34; class=&#34;headings&#34;&gt;分析问题&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;在Kubernetes Pod 的删除过程中，同时会存在两条并行的时间线，如下图所示，其中一条时间线是网络规则的更新过程，另一条时间线是Pod的删除过程。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/yuzhang17/static-resources@master/blogs/graceful_shutdown_in_kubernetes/graceful_shutdown_issues.17qy4czg0bpc.jpg&#34; alt=&#34;graceful_shutdown_issues&#34;&gt;&lt;/p&gt;
&lt;p&gt;当用户执行 &lt;code&gt;kubectl delete pod&lt;/code&gt; 命令时，&lt;/p&gt;
&lt;p&gt;网络规则生效流程：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Kube-apiserver会收到Pod删除的请求，在Etcd中更新Pod的状态为Terminating；&lt;/li&gt;
&lt;li&gt;Endpoint Controller将该Pod的ip从Endpoint对象中删除；&lt;/li&gt;
&lt;li&gt;Kube-proxy根据Endpoint对象的改变更新iptables规则，不再将流量路由到被删除的Pod。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Pod删除流程：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Kube-apiserver 会收到Pod删除的请求，在Etcd中更新Pod的状态为Terminating；&lt;/li&gt;
&lt;li&gt;Kubelet在节点上清理容器的相关资源，例如存储，网络；&lt;/li&gt;
&lt;li&gt;Kubelet发送SIGTERM进程给容器，如果容器中的进程未做任何配置，则容器立即退出；&lt;/li&gt;
&lt;li&gt;如果容器未在默认的30秒时间内退出，Kubelet发送SIGKILL给容器，强制让容器退出。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;从Pod的删除过程可以知道，如果不对容器内的进程进行任何配置，容器会立即退出，会导致问题1出现。&lt;/p&gt;
&lt;p&gt;由于网络规则的更新和Pod的删除是并行的，所以并不能保证网络规则的更新时间一定会早于Pod的删除时间，所以，有可能出现问题2。&lt;/p&gt;
&lt;h2 id=&#34;解决问题&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#解决问题&#34; class=&#34;anchor-link&#34; aria-label=&#34;解决问题&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#contents:解决问题&#34; class=&#34;headings&#34;&gt;解决问题&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;如果要解决以上两个问题，我们需要做如下配置&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;设置容器中进程的优雅退出；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;增加preStopHook；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改terminationGracePeriodSeconds。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;配置后的时间线如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/yuzhang17/static-resources@master/blogs/graceful_shutdown_in_kubernetes/graceful_shutdown_solution.6v9bw51n0hk.jpg&#34; alt=&#34;graceful_shutdown_solution&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;设置容器中进程的优雅退出&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#设置容器中进程的优雅退出&#34; class=&#34;anchor-link&#34; aria-label=&#34;设置容器中进程的优雅退出&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#contents:设置容器中进程的优雅退出&#34; class=&#34;headings&#34;&gt;设置容器中进程的优雅退出&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;在我们项目中，使用的是Springboot，只需要在Springboot的配置文件中增加配置&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;div class=&#34;table-container&#34;&gt;&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;shutdown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;graceful&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spring&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;lifecycle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;timeout-per-shutdown-phase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;30s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;进行该配置后，Springboot会保证在接收到SIGTERM之后不会再接受新的请求&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;[1]&lt;/a&gt;&lt;/sup&gt;， 并在超时时间内处理完所有正在处理的请求，如果不能处理完成，也会打印出相应的信息并强制退出。超时时间的具体值应该参考系统中最大允许的请求时长，所以理论上所有的请求都应该在30s内处理完，对于没有在30s内处理完成的请求，我们可以通过监控日志然后发Alert的方式，根据实际情况去处理。通过增加此配置，可以解决问题1。对于使用其它的语言和框架的项目，应该也存在类似的配置。&lt;/p&gt;
&lt;h3 id=&#34;增加prestophook&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#增加prestophook&#34; class=&#34;anchor-link&#34; aria-label=&#34;增加prestophook&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#contents:增加prestophook&#34; class=&#34;headings&#34;&gt;增加preStopHook&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;针对问题2，需保证网络规则更新后，也就是说新的流量不再路由到要删除的Pod后，再开始Pod的删除。所以需要在 Kubernetes 的Yaml文件中增加 preStopHook&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;[2]&lt;/a&gt;&lt;/sup&gt;，让Kubelet接收到Pod删除事件后等待一段时间，给Kube-proxy足够的时间更新iptables网络规则后，再开始删除Pod。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;div class=&#34;table-container&#34;&gt;&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;lifecycle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;preStop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;sh&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;-c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;sleep 10&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# set prestop hook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这里在我们项目中设置的10s是参照Springboot官网的配置&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;[3]&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;
&lt;h3 id=&#34;修改terminationgraceperiodseconds&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#修改terminationgraceperiodseconds&#34; class=&#34;anchor-link&#34; aria-label=&#34;修改terminationgraceperiodseconds&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#contents:修改terminationgraceperiodseconds&#34; class=&#34;headings&#34;&gt;修改terminationGracePeriodSeconds&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;参照之前分析的Pod删除的流程，Kubernetes会给容器最大的删除时长是30秒&lt;sup id=&#34;fnref1:2&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;，如果我们在Spring中优雅退出的超时时长和在Kubernetes中的preStopHook时长大于30s，则可能会出现Springboot还未处理完所有的请求Kubernetes已经开始强制删除容器。所以如果这个时长大于30秒，我们需要修改 terminationGracePeriodSeconds使其大于Springboot的优雅退出超时时间和preStopHook之和&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;div class=&#34;table-container&#34;&gt;&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;terminationGracePeriodSeconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;45&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;最终Kubernetes中的Yaml文件如下所示：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;div class=&#34;table-container&#34;&gt;&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;graceful-shutdown-test-exit-graceful-30s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;graceful-shutdown-test-exit-graceful-30s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;graceful-shutdown-test-exit-graceful-30s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;graeceful-shutdonw-test&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;graceful-shutdown-test-exit-graceful-30s:latest&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;containerPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;lifecycle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;preStop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;sh&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;-c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;sleep 10&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# set prestop hook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;terminationGracePeriodSeconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;45&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# terminationGracePeriodSeconds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;可以看出，通过设置Springboot的优雅退出，保证了正在处理的请求能够处理完成，通过设置preStopHook，保证了Pod删除和网络规则更新的时序关系。通过配置terminationGracePeriodSeconds，给了容器中进程足够的时间处理所有的请求。综合以上三个步骤，可以解决之前发现的两个问题。&lt;/p&gt;
&lt;h2 id=&#34;总结&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#总结&#34; class=&#34;anchor-link&#34; aria-label=&#34;总结&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#contents:总结&#34; class=&#34;headings&#34;&gt;总结&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;通过在Kubernetes实现优雅退出，保证在随时高频率部署的情况下，服务也可以正确处理所有的请求，减少了bug的出现，提升了用户的体验。&lt;/p&gt;
&lt;h2 id=&#34;reference&#34;&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#reference&#34; class=&#34;anchor-link&#34; aria-label=&#34;reference&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 512 512&#34; class=&#34;icon anchor-icon&#34;&gt;&lt;path d=&#34;M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#contents:reference&#34; class=&#34;headings&#34;&gt;Reference&lt;/a&gt;&lt;/h2&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.4.4/reference/htmlsingle/#boot-features-graceful-shutdown&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://docs.spring.io/spring-boot/docs/2.4.4/reference/htmlsingle/#boot-features-graceful-shutdown&lt;/a&gt;: SpringBoot graceful shutdown&amp;#160;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 320 512&#34; class=&#34;icon footnote-icon&#34;&gt;&lt;path d=&#34;M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34;&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.4.4/reference/htmlsingle/#cloud-deployment-kubernetes-container-lifecycle&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://docs.spring.io/spring-boot/docs/2.4.4/reference/htmlsingle/#cloud-deployment-kubernetes-container-lifecycle&lt;/a&gt; : SpringBoot Kubernetes Container Lifecycle&amp;#160;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 320 512&#34; class=&#34;icon footnote-icon&#34;&gt;&lt;path d=&#34;M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&amp;#160;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#fnref1:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:3&#34;&gt;
&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#hook-handler-execution&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#hook-handler-execution&lt;/a&gt; : SpringBoot Kubernetes lifecycle Hooks&amp;#160;&lt;a href=&#34;https://yuzhang17.github.io/posts/%E5%9C%A8kubernetes%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%BC%98%E9%9B%85%E9%80%80%E5%87%BA/#fnref:3&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 320 512&#34; class=&#34;icon footnote-icon&#34;&gt;&lt;path d=&#34;M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z&#34;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;

                    

                </content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="https://yuzhang17.github.io/categories/kubernetes/" term="Kubernetes" label="Kubernetes" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="https://yuzhang17.github.io/tags/kubernetes/" term="Kubernetes" label="Kubernetes" />
                            
                        
                            
                            
                            
                                <category scheme="https://yuzhang17.github.io/tags/devops/" term="Devops" label="Devops" />
                            
                        
                    
                
            
        </entry>
    
</feed>
